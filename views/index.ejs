<!DOCTYPE html>
<html lang="en">
<%- include ('./patials/head') %>
  <body style="background-image: url('');background-size: cover;">
    
    <div>
      <% if(error_msg !='' ){ %>
        <div class="notification is-danger is-light" 
        style="margin-top: 55px;font-size: 36px;font-weight: 900;margin-bottom: 20px;display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 18px;"
            style="margin-top: 100px;">
            <%= error_msg %>
        </div>
          <% } %>
          <% if(success_msg !='' ){ %>
            <div class="notification is-success is-light" 
            style="margin-top: 55px;font-size: 36px;font-weight: 900;margin-bottom: 20px;display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 18px;"
                style="margin-top: 100px;">
                <%= success_msg %>
            </div>
              <% } %>
    </div>

    
    <div id="template-mo-zay-hero-carousel" class="carousel slide bg-light text-dark" data-bs-ride="carousel">
      <ol class="carousel-indicators">
        <li data-bs-target="#template-mo-zay-hero-carousel" data-bs-slide-to="0" class="active"></li>
        <li data-bs-target="#template-mo-zay-hero-carousel" data-bs-slide-to="1"></li>
        <li data-bs-target="#template-mo-zay-hero-carousel" data-bs-slide-to="2"></li>
      </ol>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <div class="container">
            <div class="row p-5">
              <div class="mx-auto col-md-8 col-lg-6 order-lg-last">
                <img class="img-fluid d-block w-100" src="https://www.kreedon.com/wp-content/uploads/2022/10/high-gaming-pc.jpg" alt="">
              </div>
              <div class="col-lg-6 mb-0 d-flex align-items-center">
                <div class="text-align-left align-self-center">
                  <h1 class="h1 text-success"><b>SHOP</b> VKB</h1>
                  <h3 class="h2">Hiệu suất mạnh mẽ, nâng cấp linh hoạt, trải nghiệm tối ưu.</h3>
                  <p class="text-overflow">
                    Phù hợp định hiệu năng chạy cực kì linh hoạt các phần mềm văn phòng (word, excel) lướt Website cực êm, học tập cũng giống như thư giãn (màn hình sắc nét cùng hệ thống loa to rõ ràng) 
                    <!-- <a rel="sponsored" class="text-success" href="https://stories.freepik.com/" target="_blank">Freepik Stories</a>,
                    <a rel="sponsored" class="text-success" href="https://unsplash.com/" target="_blank">Unsplash</a> and
                    <a rel="sponsored" class="text-success" href="https://icons8.com/" target="_blank">Icons 8</a>. -->
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="carousel-item">
          <div class="container">
            <div class="row p-5">
              <div class="mx-auto col-md-8 col-lg-6 order-lg-last">
                <img class="img-fluid d-block w-100" src="https://topesdegama.com/app/uploads-topesdegama.com/2019/11/PC-Gaming-1024x683.jpg" alt="">
              </div>
              <div class="col-lg-6 mb-0 d-flex align-items-center">
                <div class="text-align-left">
                  <h1 class="h1 ">Hiệu suất mạnh mẽ</h1>
                  <h3 class="h2 ">Cộng đồng gaming đa dạng và thú vị</h3>
                  <p class="text-light text-overflow">
                    Hiệu suất mạnh mẽ: Máy tính bàn thường có khả năng xử lý <strong>mạnh mẽ</strong>  với các bộ vi xử lý cao cấp, card đồ họa mạnh mẽ và dung lượng bộ nhớ lớn. 
                    
                    Điều này cho phép máy tính bàn xử lý các tác vụ nặng như đồ họa, game, xử lý video và công việc chuyên nghiệp một cách mượt mà và hiệu quả.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="carousel-item">
          <div class="container">
            <div class="row p-5">
              <div class="mx-auto col-md-8 col-lg-6 order-lg-last">
                <img class="img-fluid d-block w-100" src="https://back2gaming.com/wp-content/uploads/2020/05/gaming-pc-build-php-20000-20k-philippines-online.jpg" alt="">
              </div>
              <div class="col-lg-6 mb-0 d-flex align-items-center">
                <div class="text-align-left">
                  <h1 class="h1 text-muted">Full Bộ Máy Tính</h1>
                  <h3 class="h2 text-overflow">Hiện đại đầy hiệu năng</h3>
                  <p class="text-overflow">
                    Giá trị và khả năng tùy chỉnh: Máy tính bàn thường có giá trị tốt hơn so với các thiết bị di động cùng cấu hình tương tự. Ngoài ra, người dùng có thể tùy chỉnh và xây dựng một chiếc máy tính bàn phù hợp với nhu cầu và ngân sách của mình. Thank you.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <a class="carousel-control-prev text-decoration-none w-auto ps-3" href="#template-mo-zay-hero-carousel" role="button" data-bs-slide="prev">
        <i class="fas fa-chevron-left"></i>
      </a>
      <a class="carousel-control-next text-decoration-none w-auto pe-3" href="#template-mo-zay-hero-carousel" role="button" data-bs-slide="next">
        <i class="fas fa-chevron-right"></i>
      </a>
    </div>

    
 
    <!-- End Banner Hero -->

        <!-- Start Featured Product -->
        <section class="bg-light">
          <!--Start Filter-->
        
          <div class="field is-horizontal" style="margin-top: 10px;">
            <div class="field-label is-normal">
              <label class="label">Bảo Hành</label>
            </div>
            <div class="field-body">
              <div class="field is-narrow">
                <div class="control">
                  <div class="select is-fullwidth">
                    <select id="filter-position">
                      <option value="">Lọc theo bảo hành</option>
                      <% for (let position of positionList) { %>
                      <option value="<%= position.name %>">
                        <%= position.name %>
                      </option>
                      <% } %>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="field is-horizontal">
            <div class="field-label is-normal">
              <label class="label">Loại sản phẩm</label>
            </div>
            <div class="field-body">
              <div class="field is-narrow">
                <div class="control">
                  <div class="select is-fullwidth">
                    <select id="filter-nation">
                      <option value="">Lọc theo loại sản phẩm</option>
                      <% for (let nation of nationsList) { %>
                      <option value="<%= nation._id %>">
                        <%= nation.name %>
                      </option>
                      <% } %>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        
          <!--End Filter-->
        
          <div class="container py-5">
        
            <div class="text-center py-3">
              <div class="col-lg-6 m-auto">
                <h1 class="h1">Featured Product</h1>

              </div>
            </div>
        
            <div class="row" id="product-list">
              <% players.forEach(function(player, index) { %>
              <div class="col-12 col-md-2 mb-4" data-position="<%= player.position %>" data-nationid="<%= player.nation._id %>">
                <div class="card h-100">
                  <a href="/players/<%=player.id%>">
                    <img src="<%= player.images[0] %>" class="card-img-top fixed-size-image" alt="...">
                  </a>
                  <div class="card-body">
                    <div class="player-info-container">
                      <% if (player.name.length > 10) { %>
                      <a href="#" class="h4 text-decoration-none text-dark" title="<%= player.name %>">
                        <%= player.name.substring(0, 10) + '...' %>
                      </a>
                      <% } else { %>
                      <a href="#" class="h3 text-decoration-none text-dark"><%= player.name %></a>
                      <% } %>
                      <p class="h4 py-2 " style="color:red"><%= player.price.toLocaleString('vi-VN') %><span>đ<span>
                        </p>
                        <ul class="list-unstyled d-flex justify-content-between">
                          <li>
                            <i class="text-warning fa fa-star"></i>
                            <i class="text-warning fa fa-star"></i>
                            <i class="text-warning fa fa-star"></i>
                            <i class="text-warning fa fa-star"></i>
                            <i class="text-warning fa fa-star"></i>
                          </li>
                        </ul>
                      </div>
                      <!-- <td style="padding-top: 60px"><%= player.nation.name %></td> -->
                    </div>
                    <a href="/players/<%=player.id%>" class="btn btn-info btn-info-responsive mt-auto">Thông tin chi
                      tiết</a>
                  </div>
                </div>
                <% }) %>
              </div>
        
              <div class="container py-3">
                <ul class="pagination justify-content-center" id="pagination"></ul>
              </div>
            </div>
          </section>
        

        
        
      <!-- End Featured Product -->
       <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>
    <script>
      // Lắng nghe sự kiện "change" trên các dropdown filter
      document.getElementById('filter-position').addEventListener('change', filterProducts);
      document.getElementById('filter-nation').addEventListener('change', filterProducts);
  
      function filterProducts() {
        var selectedPosition = document.getElementById('filter-position').value;
        var selectedNation = document.getElementById('filter-nation').value;
        var productList = document.getElementById('product-list');
        var products = productList.getElementsByClassName('col-12');
  
        // Lặp qua danh sách sản phẩm và ẩn/hiện sản phẩm dựa trên giá trị đã chọn
        for (var i = 0; i < products.length; i++) {
          var product = products[i];
          var position = product.getAttribute('data-position');
          var nationId = product.getAttribute('data-nationid');
  
          var shouldShow = (selectedPosition === '' || position === selectedPosition) &&
            (selectedNation === '' || nationId === selectedNation);
  
          product.style.display = shouldShow ? 'block' : 'none';
        }
      }
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      $(document).ready(function() {
        function resizeCarouselImages() {
          $('.carousel-item img').each(function() {
            $(this).css('max-width', '100%');
            $(this).css('height', 'auto');
          });
        }
      
        // Gọi hàm resizeCarouselImages khi trang web được tải hoặc kích thước cửa sổ thay đổi
        $(window).on('load resize', function() {
          resizeCarouselImages();
        });
      });
      </script>
      <script>
        window.addEventListener('load', function() {
          adjustCarouselItemHeight();
        });
        
        window.addEventListener('resize', function() {
          adjustCarouselItemHeight();
        });
        
        function adjustCarouselItemHeight() {
          var carouselItems = document.querySelectorAll('.carousel-item');
          var maxHeight = 0;
        
          // Tìm chiều cao lớn nhất trong tất cả các item
          carouselItems.forEach(function(item) {
            var itemHeight = item.querySelector('.text-align-left').offsetHeight;
            if (itemHeight > maxHeight) {
              maxHeight = itemHeight;
            }
          });
        
          // Áp dụng chiều cao lớn nhất cho tất cả các item
          carouselItems.forEach(function(item) {
            item.querySelector('.text-align-left').style.height = maxHeight + 'px';
          });
        }
        </script>
<script>
  var players = JSON.parse('<%= JSON.stringify(players) %>');
  var itemsPerPage = 6;
  var currentPage = 1;
  var totalPages = Math.ceil(players.length / itemsPerPage);

  // Lắng nghe sự kiện "change" trên các dropdown filter
  document.getElementById('filter-position').addEventListener('change', filterProducts);
  document.getElementById('filter-nation').addEventListener('change', filterProducts);

  function renderPagination() {
    var pagination = document.getElementById('pagination');
    pagination.innerHTML = '';

    // Tạo nút Previous (trang trước)
    var prevButton = document.createElement('li');
    prevButton.classList.add('page-item');
    var prevLink = document.createElement('a');
    prevLink.classList.add('page-link');
    prevLink.innerText = 'Previous';
    prevButton.appendChild(prevLink);
    pagination.appendChild(prevButton);

    // Tạo các nút trang
    for (var i = 1; i <= totalPages; i++) {
      var pageButton = document.createElement('li');
      pageButton.classList.add('page-item');
      var pageLink = document.createElement('a');
      pageLink.classList.add('page-link');
      pageLink.innerText = i;
      pageButton.appendChild(pageLink);
      pagination.appendChild(pageButton);
    }

    // Tạo nút Next (trang tiếp theo)
    var nextButton = document.createElement('li');
    nextButton.classList.add('page-item');
    var nextLink = document.createElement('a');
    nextLink.classList.add('page-link');
    nextLink.innerText = 'Next';
    nextButton.appendChild(nextLink);
    pagination.appendChild(nextButton);

    // Lắng nghe sự kiện click trên các nút trang
    pagination.addEventListener('click', function (event) {
      var target = event.target;
      if (target.tagName === 'A') {
        var page = parseInt(target.innerText);
        if (!isNaN(page)) {
          currentPage = page;
          renderProducts();
          scrollToTop();
        } else if (target.innerText === 'Previous') {
          if (currentPage > 1) {
            currentPage--;
            renderProducts();
            scrollToTop();
          }
        } else if (target.innerText === 'Next') {
          if (currentPage < totalPages) {
            currentPage++;
            renderProducts();
            scrollToTop();
          }
        }
      }
    });
  }

  function renderProducts() {
    var productList = document.getElementById('product-list');
    productList.innerHTML = '';

    var startIndex = (currentPage - 1) * itemsPerPage;
    var endIndex = Math.min(startIndex + itemsPerPage, players.length);

    for (var i = startIndex; i < endIndex; i++) {
      var player = players[i];
      var playerDiv = document.createElement('div');
      playerDiv.classList.add('col-12', 'col-md-2', 'mb-4');
      playerDiv.setAttribute('data-position', player.position);
      playerDiv.setAttribute('data-nationid', player.nation._id);

      // Tạo nội dung của playerDiv
      // ...

      productList.appendChild(playerDiv);
    }
  }

  // Hàm scrollToTop để cuộn lên đầu trang khi chuyển trang
  function scrollToTop() {
    window.scrollTo({
      top: 0,
      behavior: 'smooth',
    });
  }

  renderProducts();
  renderPagination();
</script>
  </body>
  <%- include ('./patials/footer') %>
</html>